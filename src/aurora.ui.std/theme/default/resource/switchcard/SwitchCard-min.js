(function(a){var b=".switchcard-body";a.SwitchCard=Ext.extend(a.Component,{initComponent:function(c){var d=this;a.SwitchCard.superclass.initComponent.call(d,c);d.wrap.select(b+"[url]{display!=none}").each(d.load,d)},processDatasetListener:function(d){var e=this,c=e.binder;if(c){var f=c.ds;f[d]("update",e.onUpdate,e);f[d]("indexchange",e.onIndexChange,e)}},initEvents:function(){a.SwitchCard.superclass.addEvents.call(this);this.addEvents("cardhide","cardshow");this.processListener("on")},onUpdate:function(f,c,e,d){if(this.binder&&this.binder.name==e){this.showByValue(d)}},onIndexChange:function(e,c,d){if(this.binder&&(d=this.binder.name)){this.showByValue(c.get(d))}},showByIndexs:function(){var c=this,d=Ext.isArray(arguments[0])?arguments[0]:Ext.toArray(arguments);c.wrap.select(b).each(function(e,g,f){var h=d.indexOf(f)==-1;if(h){if(!e.isStyle("display","none")){e.setStyle({display:"none"});c.fireEvent("cardhide",c,Ext.get(e.dom).cmps)}}else{c.load(e)}})},load:function(c){c=Ext.get(c.dom);var e=this,d=c.getAttributeNS("","url");if(Ext.isEmpty(d)){if(c.isStyle("display","none")){c.setStyle({display:""});e.fireEvent("cardshow",e,c.cmps)}}else{c.setStyle({display:""});c.cmps={};e.showLoading(c);Ext.Ajax.request({url:Ext.urlAppend(c.getAttributeNS("","url"),"_vw="+a.getViewportWidth()+"&_vh="+a.getViewportHeight()),success:function(f,g){e.clearLoading(c);c.set({url:""});c.update(f.responseText,true,function(){e.fireEvent("cardshow",e,c.cmps)},c)},failure:function(f){c.update(f.responseText)}})}},showByValue:function(e){var d=this,c=d.wrap;c.select(b+"[case="+e+"]").each(d.load,d);c.select(b+"[case!="+e+"]").each(function(f){if(!f.isStyle("display","none")){f.setStyle({display:"none"});d.fireEvent("cardhide",d,Ext.get(f.dom).cmps)}},d)},bind:function(e,c){if(Ext.isString(e)){e=$(e);if(!e){return}}var d=this;d.binder={ds:e,name:c};d.processDatasetListener("on");d.showByValue(e.getCurrentRecord().get(c))},showLoading:function(c){c.update(_lang["switchcard.loading"]).setStyle({"text-align":"center","line-height":5})},clearLoading:function(c){c.update("").setStyle({"text-align":"","line-height":""})},destroy:function(){var d=this,c=d.wrap;Ext.each(c.query(".switchcard-body"),function(e){Ext.iterate(Ext.get(e).cmps,function(f,g){try{g.destroy&&g.destroy()}catch(h){alert("销毁SwitchCard出错: "+h)}})});a.SwitchCard.superclass.destroy.call(d)}});a.SwitchCard.revision="$Rev: 8496 $"})($A);