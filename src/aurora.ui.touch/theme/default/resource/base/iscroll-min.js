/*
 * iScroll v4.1.9 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(){var s=Math,f=function(m){return m>>0},w=(/webkit/i).test(navigator.appVersion)?"webkit":(/firefox/i).test(navigator.userAgent)?"Moz":(/trident/i).test(navigator.userAgent)?"ms":"opera" in window?"O":"",x=(/android/gi).test(navigator.appVersion),j=(/iphone|ipad/gi).test(navigator.appVersion),d=(/playbook/gi).test(navigator.appVersion),o=(/hp-tablet/gi).test(navigator.appVersion),l="WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix(),v="ontouchstart" in window&&!o,g=w+"Transform" in document.documentElement.style,h=j||d,p=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(m){return setTimeout(m,1)}})(),n=(function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout})(),a="onorientationchange" in window?"orientationchange":null,i="resize",c=v?"touchstart":"mousedown",q=v?"touchmove":"mousemove",e=v?"touchend":"mouseup",u=v?"touchcancel":"mouseup",r=w=="Moz"?"DOMMouseScroll":"mousewheel",b="translate"+(l?"3d(":"("),k=l?",0)":")",t=function(z,m){var A=this,B=document,y;A.wrapper=typeof z=="object"?z:B.getElementById(z);A.wrapper.style.overflow="hidden";A.scroller=A.wrapper.children[0];A.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,hScrollbar:true,vScrollbar:true,fixedScrollbar:x,hideScrollbar:j,fadeScrollbar:j&&l,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(C){C.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(y in m){A.options[y]=m[y]}A.x=A.options.x;A.y=A.options.y;A.options.useTransform=g?A.options.useTransform:false;A.options.hScrollbar=A.options.hScroll&&A.options.hScrollbar;A.options.vScrollbar=A.options.vScroll&&A.options.vScrollbar;A.options.zoom=A.options.useTransform&&A.options.zoom;A.options.useTransition=h&&A.options.useTransition;if(A.options.zoom&&x){b="translate(";k=")"}A.scroller.style[w+"TransitionProperty"]=A.options.useTransform?"-"+w.toLowerCase()+"-transform":"top left";A.scroller.style[w+"TransitionDuration"]="0";A.scroller.style[w+"TransformOrigin"]="0 0";if(A.options.useTransition){A.scroller.style[w+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"}if(A.options.useTransform){A.scroller.style[w+"Transform"]=b+A.x+"px,"+A.y+"px"+k}else{A.scroller.style.cssText+=";position:absolute;top:"+A.y+"px;left:"+A.x+"px"}if(A.options.useTransition){A.options.fixedScrollbar=true}A.refresh();A._bind(i,window);A._bind(c);if(!v){A._bind("mouseout",A.wrapper);if(A.options.wheelAction!="none"){A._bind(r)}}if(A.options.checkDOMChanges){A.checkDOMTime=setInterval(function(){A._checkDOMChanges()},500)}};t.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(y){var m=this;switch(y.type){case c:if(!v&&y.button!==0){return}m._start(y);break;case q:m._move(y);break;case e:case u:m._end(y);break;case a:case i:m._resize();break;case r:m._wheel(y);break;case"mouseout":m._mouseout(y);break;case"webkitTransitionEnd":m._transitionEnd(y);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)){return}this.refresh()},_scrollbar:function(m){var z=this,A=document,y;if(!z[m+"Scrollbar"]){if(z[m+"ScrollbarWrapper"]){if(g){z[m+"ScrollbarIndicator"].style[w+"Transform"]=""}z[m+"ScrollbarWrapper"].parentNode.removeChild(z[m+"ScrollbarWrapper"]);z[m+"ScrollbarWrapper"]=null;z[m+"ScrollbarIndicator"]=null}return}if(!z[m+"ScrollbarWrapper"]){y=A.createElement("div");if(z.options.scrollbarClass){y.className=z.options.scrollbarClass+m.toUpperCase()}else{y.style.cssText="position:absolute;z-index:100;"+(m=="h"?"height:7px;bottom:1px;left:2px;right:"+(z.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(z.hScrollbar?"7":"2")+"px;top:2px;right:1px")}y.style.cssText+=";pointer-events:none;-"+w+"-transition-property:opacity;-"+w+"-transition-duration:"+(z.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(z.options.hideScrollbar?"0":"1");z.wrapper.appendChild(y);z[m+"ScrollbarWrapper"]=y;y=A.createElement("div");if(!z.options.scrollbarClass){y.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+w+"-background-clip:padding-box;-"+w+"-box-sizing:border-box;"+(m=="h"?"height:100%":"width:100%")+";-"+w+"-border-radius:3px;border-radius:3px"}y.style.cssText+=";pointer-events:none;-"+w+"-transition-property:-"+w+"-transform;-"+w+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+w+"-transition-duration:0;-"+w+"-transform:"+b+"0,0"+k;if(z.options.useTransition){y.style.cssText+=";-"+w+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"}z[m+"ScrollbarWrapper"].appendChild(y);z[m+"ScrollbarIndicator"]=y}if(m=="h"){z.hScrollbarSize=z.hScrollbarWrapper.clientWidth;z.hScrollbarIndicatorSize=s.max(f(z.hScrollbarSize*z.hScrollbarSize/z.scrollerW),8);z.hScrollbarIndicator.style.width=z.hScrollbarIndicatorSize+"px";z.hScrollbarMaxScroll=z.hScrollbarSize-z.hScrollbarIndicatorSize;z.hScrollbarProp=z.hScrollbarMaxScroll/z.maxScrollX}else{z.vScrollbarSize=z.vScrollbarWrapper.clientHeight;z.vScrollbarIndicatorSize=s.max(f(z.vScrollbarSize*z.vScrollbarSize/z.scrollerH),8);z.vScrollbarIndicator.style.height=z.vScrollbarIndicatorSize+"px";z.vScrollbarMaxScroll=z.vScrollbarSize-z.vScrollbarIndicatorSize;z.vScrollbarProp=z.vScrollbarMaxScroll/z.maxScrollY}z._scrollbarPos(m,true)},_resize:function(){var m=this;setTimeout(function(){m.refresh()},x?200:0)},_pos:function(m,z){m=this.hScroll?m:0;z=this.vScroll?z:0;if(this.options.useTransform){this.scroller.style[w+"Transform"]=b+m+"px,"+z+"px"+k+" scale("+this.scale+")"}else{m=f(m);z=f(z);this.scroller.style.left=m+"px";this.scroller.style.top=z+"px"}this.x=m;this.y=z;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(m,A){var z=this,B=m=="h"?z.x:z.y,y;if(!z[m+"Scrollbar"]){return}B=z[m+"ScrollbarProp"]*B;if(B<0){if(!z.options.fixedScrollbar){y=z[m+"ScrollbarIndicatorSize"]+f(B*3);if(y<8){y=8}z[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=y+"px"}B=0}else{if(B>z[m+"ScrollbarMaxScroll"]){if(!z.options.fixedScrollbar){y=z[m+"ScrollbarIndicatorSize"]-f((B-z[m+"ScrollbarMaxScroll"])*3);if(y<8){y=8}z[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=y+"px";B=z[m+"ScrollbarMaxScroll"]+(z[m+"ScrollbarIndicatorSize"]-y)}else{B=z[m+"ScrollbarMaxScroll"]}}}z[m+"ScrollbarWrapper"].style[w+"TransitionDelay"]="0";z[m+"ScrollbarWrapper"].style.opacity=A&&z.options.hideScrollbar?"0":"1";z[m+"ScrollbarIndicator"].style[w+"Transform"]=b+(m=="h"?B+"px,0":"0,"+B+"px")+k},_start:function(E){var D=this,z=v?E.touches[0]:E,A,m,F,C,B;if(!D.enabled){return}if(D.options.onBeforeScrollStart){D.options.onBeforeScrollStart.call(D,E)}if(D.options.useTransition||D.options.zoom){D._transitionTime(0)}D.moved=false;D.animating=false;D.zoomed=false;D.distX=0;D.distY=0;D.absDistX=0;D.absDistY=0;D.dirX=0;D.dirY=0;if(D.options.zoom&&v&&E.touches.length>1){C=s.abs(E.touches[0].pageX-E.touches[1].pageX);B=s.abs(E.touches[0].pageY-E.touches[1].pageY);D.touchesDistStart=s.sqrt(C*C+B*B);D.originX=s.abs(E.touches[0].pageX+E.touches[1].pageX-D.wrapperOffsetLeft*2)/2-D.x;D.originY=s.abs(E.touches[0].pageY+E.touches[1].pageY-D.wrapperOffsetTop*2)/2-D.y;if(D.options.onZoomStart){D.options.onZoomStart.call(D,E)}}if(D.options.momentum){if(D.options.useTransform){A=getComputedStyle(D.scroller,null)[w+"Transform"].replace(/[^0-9-.,]/g,"").split(",");m=A[4]*1;F=A[5]*1}else{m=getComputedStyle(D.scroller,null).left.replace(/[^0-9-]/g,"")*1;F=getComputedStyle(D.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(m!=D.x||F!=D.y){if(D.options.useTransition){D._unbind("webkitTransitionEnd")}else{n(D.aniTime)}D.steps=[];D._pos(m,F)}}D.absStartX=D.x;D.absStartY=D.y;D.startX=D.x;D.startY=D.y;D.pointX=z.pageX;D.pointY=z.pageY;D.startTime=E.timeStamp||Date.now();if(D.options.onScrollStart){D.options.onScrollStart.call(D,E)}D._bind(q);D._bind(e);D._bind(u)},_move:function(F){var D=this,G=v?F.touches[0]:F,B=G.pageX-D.pointX,z=G.pageY-D.pointY,m=D.x+B,H=D.y+z,C,A,y,E=F.timeStamp||Date.now();if(D.options.onBeforeScrollMove){D.options.onBeforeScrollMove.call(D,F)}if(D.options.zoom&&v&&F.touches.length>1){C=s.abs(F.touches[0].pageX-F.touches[1].pageX);A=s.abs(F.touches[0].pageY-F.touches[1].pageY);D.touchesDist=s.sqrt(C*C+A*A);D.zoomed=true;y=1/D.touchesDistStart*D.touchesDist*this.scale;if(y<D.options.zoomMin){y=0.5*D.options.zoomMin*Math.pow(2,y/D.options.zoomMin)}else{if(y>D.options.zoomMax){y=2*D.options.zoomMax*Math.pow(0.5,D.options.zoomMax/y)}}D.lastScale=y/this.scale;m=this.originX-this.originX*D.lastScale+this.x,H=this.originY-this.originY*D.lastScale+this.y;this.scroller.style[w+"Transform"]=b+m+"px,"+H+"px"+k+" scale("+y+")";if(D.options.onZoom){D.options.onZoom.call(D,F)}return}D.pointX=G.pageX;D.pointY=G.pageY;if(m>0||m<D.maxScrollX){m=D.options.bounce?D.x+(B/2):m>=0||D.maxScrollX>=0?0:D.maxScrollX}if(H>D.minScrollY||H<D.maxScrollY){H=D.options.bounce?D.y+(z/2):H>=D.minScrollY||D.maxScrollY>=0?D.minScrollY:D.maxScrollY}D.distX+=B;D.distY+=z;D.absDistX=s.abs(D.distX);D.absDistY=s.abs(D.distY);if(D.absDistX<6&&D.absDistY<6){return}if(D.options.lockDirection){if(D.absDistX>D.absDistY+5){H=D.y;z=0}else{if(D.absDistY>D.absDistX+5){m=D.x;B=0}}}D.moved=true;D._pos(m,H);D.dirX=B>0?-1:B<0?1:0;D.dirY=z>0?-1:z<0?1:0;if(E-D.startTime>300){D.startTime=E;D.startX=D.x;D.startY=D.y}if(D.options.onScrollMove){D.options.onScrollMove.call(D,F)}},_end:function(F){if(v&&F.touches.length!=0){return}var D=this,L=v?F.changedTouches[0]:F,G,K,z={dist:0,time:0},m={dist:0,time:0},C=(F.timeStamp||Date.now())-D.startTime,H=D.x,E=D.y,J,I,y,B,A;D._unbind(q);D._unbind(e);D._unbind(u);if(D.options.onBeforeScrollEnd){D.options.onBeforeScrollEnd.call(D,F)}if(D.zoomed){A=D.scale*D.lastScale;A=Math.max(D.options.zoomMin,A);A=Math.min(D.options.zoomMax,A);D.lastScale=A/D.scale;D.scale=A;D.x=D.originX-D.originX*D.lastScale+D.x;D.y=D.originY-D.originY*D.lastScale+D.y;D.scroller.style[w+"TransitionDuration"]="200ms";D.scroller.style[w+"Transform"]=b+D.x+"px,"+D.y+"px"+k+" scale("+D.scale+")";D.zoomed=false;D.refresh();if(D.options.onZoomEnd){D.options.onZoomEnd.call(D,F)}return}if(!D.moved){if(v){if(D.doubleTapTimer&&D.options.zoom){clearTimeout(D.doubleTapTimer);D.doubleTapTimer=null;if(D.options.onZoomStart){D.options.onZoomStart.call(D,F)}D.zoom(D.pointX,D.pointY,D.scale==1?D.options.doubleTapZoom:1);if(D.options.onZoomEnd){setTimeout(function(){D.options.onZoomEnd.call(D,F)},200)}}else{D.doubleTapTimer=setTimeout(function(){D.doubleTapTimer=null;G=L.target;while(G.nodeType!=1){G=G.parentNode}if(G.tagName!="SELECT"&&G.tagName!="INPUT"&&G.tagName!="TEXTAREA"){K=document.createEvent("MouseEvents");K.initMouseEvent("click",true,true,F.view,1,L.screenX,L.screenY,L.clientX,L.clientY,F.ctrlKey,F.altKey,F.shiftKey,F.metaKey,0,null);K._fake=true;G.dispatchEvent(K)}},D.options.zoom?250:0)}}D._resetPos(200);if(D.options.onTouchEnd){D.options.onTouchEnd.call(D,F)}return}if(C<300&&D.options.momentum){z=H?D._momentum(H-D.startX,C,-D.x,D.scrollerW-D.wrapperW+D.x,D.options.bounce?D.wrapperW:0):z;m=E?D._momentum(E-D.startY,C,-D.y,(D.maxScrollY<0?D.scrollerH-D.wrapperH+D.y-D.minScrollY:0),D.options.bounce?D.wrapperH:0):m;H=D.x+z.dist;E=D.y+m.dist;if((D.x>0&&H>0)||(D.x<D.maxScrollX&&H<D.maxScrollX)){z={dist:0,time:0}}if((D.y>D.minScrollY&&E>D.minScrollY)||(D.y<D.maxScrollY&&E<D.maxScrollY)){m={dist:0,time:0}}}if(z.dist||m.dist){y=s.max(s.max(z.time,m.time),10);if(D.options.snap){J=H-D.absStartX;I=E-D.absStartY;if(s.abs(J)<D.options.snapThreshold&&s.abs(I)<D.options.snapThreshold){D.scrollTo(D.absStartX,D.absStartY,200)}else{B=D._snap(H,E);H=B.x;E=B.y;y=s.max(B.time,y)}}D.scrollTo(f(H),f(E),y);if(D.options.onTouchEnd){D.options.onTouchEnd.call(D,F)}return}if(D.options.snap){J=H-D.absStartX;I=E-D.absStartY;if(s.abs(J)<D.options.snapThreshold&&s.abs(I)<D.options.snapThreshold){D.scrollTo(D.absStartX,D.absStartY,200)}else{B=D._snap(D.x,D.y);if(B.x!=D.x||B.y!=D.y){D.scrollTo(B.x,B.y,B.time)}}if(D.options.onTouchEnd){D.options.onTouchEnd.call(D,F)}return}D._resetPos(200);if(D.options.onTouchEnd){D.options.onTouchEnd.call(D,F)}},_resetPos:function(z){var m=this,A=m.x>=0?0:m.x<m.maxScrollX?m.maxScrollX:m.x,y=m.y>=m.minScrollY||m.maxScrollY>0?m.minScrollY:m.y<m.maxScrollY?m.maxScrollY:m.y;if(A==m.x&&y==m.y){if(m.moved){m.moved=false;if(m.options.onScrollEnd){m.options.onScrollEnd.call(m)}}if(m.hScrollbar&&m.options.hideScrollbar){if(w=="webkit"){m.hScrollbarWrapper.style[w+"TransitionDelay"]="300ms"}m.hScrollbarWrapper.style.opacity="0"}if(m.vScrollbar&&m.options.hideScrollbar){if(w=="webkit"){m.vScrollbarWrapper.style[w+"TransitionDelay"]="300ms"}m.vScrollbarWrapper.style.opacity="0"}return}m.scrollTo(A,y,z||0)},_wheel:function(C){var A=this,B,z,y,m,D;if("wheelDeltaX" in C){B=C.wheelDeltaX/12;z=C.wheelDeltaY/12}else{if("wheelDelta" in C){B=z=C.wheelDelta/12}else{if("detail" in C){B=z=-C.detail*3}else{return}}}if(A.options.wheelAction=="zoom"){D=A.scale*Math.pow(2,1/3*(z?z/Math.abs(z):0));if(D<A.options.zoomMin){D=A.options.zoomMin}if(D>A.options.zoomMax){D=A.options.zoomMax}if(D!=A.scale){if(!A.wheelZoomCount&&A.options.onZoomStart){A.options.onZoomStart.call(A,C)}A.wheelZoomCount++;A.zoom(C.pageX,C.pageY,D,400);setTimeout(function(){A.wheelZoomCount--;if(!A.wheelZoomCount&&A.options.onZoomEnd){A.options.onZoomEnd.call(A,C)}},400)}return}y=A.x+B;m=A.y+z;if(y>0){y=0}else{if(y<A.maxScrollX){y=A.maxScrollX}}if(m>A.minScrollY){m=A.minScrollY}else{if(m<A.maxScrollY){m=A.maxScrollY}}A.scrollTo(y,m,0)},_mouseout:function(y){var m=y.relatedTarget;if(!m){this._end(y);return}while(m=m.parentNode){if(m==this.wrapper){return}}this._end(y)},_transitionEnd:function(y){var m=this;if(y.target!=m.scroller){return}m._unbind("webkitTransitionEnd");m._startAni()},_startAni:function(){var D=this,y=D.x,m=D.y,B=Date.now(),C,A,z;if(D.animating){return}if(!D.steps.length){D._resetPos(400);return}C=D.steps.shift();if(C.x==y&&C.y==m){C.time=0}D.animating=true;D.moved=true;if(D.options.useTransition){D._transitionTime(C.time);D._pos(C.x,C.y);D.animating=false;if(C.time){D._bind("webkitTransitionEnd")}else{D._resetPos(0)}return}z=function(){var E=Date.now(),G,F;if(E>=B+C.time){D._pos(C.x,C.y);D.animating=false;if(D.options.onAnimationEnd){D.options.onAnimationEnd.call(D)}D._startAni();return}E=(E-B)/C.time-1;A=s.sqrt(1-E*E);G=(C.x-y)*A+y;F=(C.y-m)*A+m;D._pos(G,F);if(D.animating){D.aniTime=p(z)}};z()},_transitionTime:function(m){m+="ms";this.scroller.style[w+"TransitionDuration"]=m;if(this.hScrollbar){this.hScrollbarIndicator.style[w+"TransitionDuration"]=m}if(this.vScrollbar){this.vScrollbarIndicator.style[w+"TransitionDuration"]=m}},_momentum:function(E,y,C,m,G){var D=0.0006,z=s.abs(E)/y,A=(z*z)/(2*D),F=0,B=0;if(E>0&&A>C){B=G/(6/(A/z*D));C=C+B;z=z*C/A;A=C}else{if(E<0&&A>m){B=G/(6/(A/z*D));m=m+B;z=z*m/A;A=m}}A=A*(E<0?-1:1);F=z/D;return{dist:A,time:f(F)}},_offset:function(m){var z=-m.offsetLeft,y=-m.offsetTop;while(m=m.offsetParent){z-=m.offsetLeft;y-=m.offsetTop}if(m!=this.wrapper){z*=this.scale;y*=this.scale}return{left:z,top:y}},_snap:function(G,F){var D=this,C,B,E,A,z,m;E=D.pagesX.length-1;for(C=0,B=D.pagesX.length;C<B;C++){if(G>=D.pagesX[C]){E=C;break}}if(E==D.currPageX&&E>0&&D.dirX<0){E--}G=D.pagesX[E];z=s.abs(G-D.pagesX[D.currPageX]);z=z?s.abs(D.x-G)/z*500:0;D.currPageX=E;E=D.pagesY.length-1;for(C=0;C<E;C++){if(F>=D.pagesY[C]){E=C;break}}if(E==D.currPageY&&E>0&&D.dirY<0){E--}F=D.pagesY[E];m=s.abs(F-D.pagesY[D.currPageY]);m=m?s.abs(D.y-F)/m*500:0;D.currPageY=E;A=f(s.max(z,m))||200;return{x:G,y:F,time:A}},_bind:function(z,y,m){(y||this.scroller).addEventListener(z,this,!!m)},_unbind:function(z,y,m){(y||this.scroller).removeEventListener(z,this,!!m)},destroy:function(){var m=this;m.scroller.style[w+"Transform"]="";m.hScrollbar=false;m.vScrollbar=false;m._scrollbar("h");m._scrollbar("v");m._unbind(i,window);m._unbind(c);m._unbind(q);m._unbind(e);m._unbind(u);if(!m.options.hasTouch){m._unbind("mouseout",m.wrapper);m._unbind(r)}if(m.options.useTransition){m._unbind("webkitTransitionEnd")}if(m.options.checkDOMChanges){clearInterval(m.checkDOMTime)}if(m.options.onDestroy){m.options.onDestroy.call(m)}},refresh:function(){var A=this,C,z,m,y,D=0,B=0;if(A.scale<A.options.zoomMin){A.scale=A.options.zoomMin}A.wrapperW=A.wrapper.clientWidth||1;A.wrapperH=A.wrapper.clientHeight||1;A.minScrollY=-A.options.topOffset||0;A.scrollerW=f(A.scroller.offsetWidth*A.scale);A.scrollerH=f((A.scroller.offsetHeight+A.minScrollY)*A.scale);A.maxScrollX=A.wrapperW-A.scrollerW;A.maxScrollY=A.wrapperH-A.scrollerH+A.minScrollY;A.dirX=0;A.dirY=0;if(A.options.onRefresh){A.options.onRefresh.call(A)}A.hScroll=A.options.hScroll&&A.maxScrollX<0;A.vScroll=A.options.vScroll&&(!A.options.bounceLock&&!A.hScroll||A.scrollerH>A.wrapperH);A.hScrollbar=A.hScroll&&A.options.hScrollbar;A.vScrollbar=A.vScroll&&A.options.vScrollbar&&A.scrollerH>A.wrapperH;C=A._offset(A.wrapper);A.wrapperOffsetLeft=-C.left;A.wrapperOffsetTop=-C.top;if(typeof A.options.snap=="string"){A.pagesX=[];A.pagesY=[];y=A.scroller.querySelectorAll(A.options.snap);for(z=0,m=y.length;z<m;z++){D=A._offset(y[z]);D.left+=A.wrapperOffsetLeft;D.top+=A.wrapperOffsetTop;A.pagesX[z]=D.left<A.maxScrollX?A.maxScrollX:D.left*A.scale;A.pagesY[z]=D.top<A.maxScrollY?A.maxScrollY:D.top*A.scale}}else{if(A.options.snap){A.pagesX=[];while(D>=A.maxScrollX){A.pagesX[B]=D;D=D-A.wrapperW;B++}if(A.maxScrollX%A.wrapperW){A.pagesX[A.pagesX.length]=A.maxScrollX-A.pagesX[A.pagesX.length-1]+A.pagesX[A.pagesX.length-1]}D=0;B=0;A.pagesY=[];while(D>=A.maxScrollY){A.pagesY[B]=D;D=D-A.wrapperH;B++}if(A.maxScrollY%A.wrapperH){A.pagesY[A.pagesY.length]=A.maxScrollY-A.pagesY[A.pagesY.length-1]+A.pagesY[A.pagesY.length-1]}}}A._scrollbar("h");A._scrollbar("v");if(!A.zoomed){A.scroller.style[w+"TransitionDuration"]="0";A._resetPos(200)}},scrollTo:function(m,F,E,D){var C=this,B=m,A,z;C.stop();if(!B.length){B=[{x:m,y:F,time:E,relative:D}]}for(A=0,z=B.length;A<z;A++){if(B[A].relative){B[A].x=C.x-B[A].x;B[A].y=C.y-B[A].y}C.steps.push({x:B[A].x,y:B[A].y,time:B[A].time||0})}C._startAni()},scrollToElement:function(m,z){var y=this,A;m=m.nodeType?m:y.scroller.querySelector(m);if(!m){return}A=y._offset(m);A.left+=y.wrapperOffsetLeft;A.top+=y.wrapperOffsetTop;A.left=A.left>0?0:A.left<y.maxScrollX?y.maxScrollX:A.left;A.top=A.top>y.minScrollY?y.minScrollY:A.top<y.maxScrollY?y.maxScrollY:A.top;z=z===undefined?s.max(s.abs(A.left)*2,s.abs(A.top)*2):z;y.scrollTo(A.left,A.top,z)},scrollToPage:function(A,z,C){var B=this,m,D;C=C===undefined?400:C;if(B.options.onScrollStart){B.options.onScrollStart.call(B)}if(B.options.snap){A=A=="next"?B.currPageX+1:A=="prev"?B.currPageX-1:A;z=z=="next"?B.currPageY+1:z=="prev"?B.currPageY-1:z;A=A<0?0:A>B.pagesX.length-1?B.pagesX.length-1:A;z=z<0?0:z>B.pagesY.length-1?B.pagesY.length-1:z;B.currPageX=A;B.currPageY=z;m=B.pagesX[A];D=B.pagesY[z]}else{m=-B.wrapperW*A;D=-B.wrapperH*z;if(m<B.maxScrollX){m=B.maxScrollX}if(D<B.maxScrollY){D=B.maxScrollY}}B.scrollTo(m,D,C)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(q);this._unbind(e);this._unbind(u)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition){this._unbind("webkitTransitionEnd")}else{n(this.aniTime)}this.steps=[];this.moved=false;this.animating=false},zoom:function(m,D,C,B){var z=this,A=C/z.scale;if(!z.options.useTransform){return}z.zoomed=true;B=B===undefined?200:B;m=m-z.wrapperOffsetLeft-z.x;D=D-z.wrapperOffsetTop-z.y;z.x=m-m*A+z.x;z.y=D-D*A+z.y;z.scale=C;z.refresh();z.x=z.x>0?0:z.x<z.maxScrollX?z.maxScrollX:z.x;z.y=z.y>z.minScrollY?z.minScrollY:z.y<z.maxScrollY?z.maxScrollY:z.y;z.scroller.style[w+"TransitionDuration"]=B+"ms";z.scroller.style[w+"Transform"]=b+z.x+"px,"+z.y+"px"+k+" scale("+C+")";z.zoomed=false},isReady:function(){return !this.moved&&!this.zoomed&&!this.animating}};if(typeof exports!=="undefined"){exports.iScroll=t}else{window.iScroll=t}})();