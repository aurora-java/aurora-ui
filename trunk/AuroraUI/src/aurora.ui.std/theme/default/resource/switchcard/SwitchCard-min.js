(function(a){var b=".switchcard-body";a.SwitchCard=Ext.extend(a.Component,{initComponent:function(c){var d=this;a.SwitchCard.superclass.initComponent.call(d,c);d.wrap.select(b+"[url]{display!=none}").each(d.load,d)},processDatasetListener:function(d){var e=this,c=e.binder;if(c){var f=c.ds;f[d]("update",e.onUpdate,e);f[d]("indexchange",e.onIndexChange,e)}},onUpdate:function(f,c,e,d){if(this.binder&&this.binder.name==e){this.showByValue(d)}},onIndexChange:function(e,c,d){if(this.binder&&(d=this.binder.name)){this.showByValue(c.get(d))}},showByIndexs:function(){indexs=Ext.isArray(arguments[0])?arguments[0]:Ext.toArray(arguments);this.wrap.select(b).each(function(c,e,d){c.setStyle({display:indexs.indexOf(d)==-1?"none":""})})},load:function(c){var d=this;c=Ext.get(c);c.cmps={};d.showLoading(c);Ext.Ajax.request({url:Ext.urlAppend(c.getAttributeNS("","url"),"_vw="+a.getViewportWidth()+"&_vh="+a.getViewportHeight()),success:function(e,f){d.clearLoading(c);c.set({url:""});c.update(e.responseText,true,function(){},c)},failure:function(e){c.update(e.responseText)}})},showByValue:function(e){var d=this,c=d.wrap;c.select(b+"[case="+e+"]").setStyle({display:""}).filter("[url]").each(d.load,d);c.select(b+"[case!="+e+"]").setStyle({display:"none"})},bind:function(e,c){if(Ext.isString(e)){e=$(e);if(!e){return}}var d=this;d.binder={ds:e,name:c};d.processDatasetListener("on");d.showByValue(e.getCurrentRecord().get(c))},showLoading:function(c){c.update(_lang["switchcard.loading"]).setStyle({"text-align":"center","line-height":5})},clearLoading:function(c){c.update("").setStyle({"text-align":"","line-height":""})},destroy:function(){var d=this,c=d.wrap;a.SwitchCard.superclass.destroy.call(d);c.select(".switchcard-body").each(function(e){Ext.iterate(Ext.get(e).cmps,function(f,g){try{g.destroy&&g.destroy()}catch(h){alert("销毁SwitchPanel出错: "+h)}})})}});a.SwitchCard.revision="$Rev: 8349 $"})($A);