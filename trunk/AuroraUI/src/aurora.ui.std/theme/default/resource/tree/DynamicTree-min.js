$A.DynamicTree=Ext.extend($A.Tree,{initEvents:function(){$A.DynamicTree.superclass.initEvents.call(this);this.addEvents("load")},createTreeNode:function(a){return new $A.DynamicTree.TreeNode(a)}});$A.DynamicTree.TreeNode=Ext.extend($A.Tree.TreeNode,{createNode:function(a){return new $A.DynamicTree.TreeNode(a)},expand:function(){if(this.isRoot()||(this.childNodes.length>0&&this.isLoaded)){if(!this.isRoot()){this.record.set(this.getOwnerTree().expandfield,"Y",true)}this.isExpand=true;this.paintChildren();this.els.child.style.display="block";this.paintIconImg();this.paintClipIcoImg();this.refreshDom()}else{if(!this.isLoaded&&this.getOwnerTree().showSkeleton){var a=this.getOwnerTree();var b=a.dataset;if(this.data.record.isNew){this.isLoaded=true;this.els.icon.className="node-icon icon-node";this.paintClipIcoImg()}else{this.els.icon.className="node-icon icon-loading";$A.request({url:b.queryurl,para:this.data.record.data,success:function(g){this.isLoaded=true;if(!g.result.record){g.result.record=[]}var e=[].concat(g.result.record);var c=Number.MAX_VALUE;e.sort(function(i,h){return parseFloat(i[a.sequencefield]||c)-parseFloat(h[a.sequencefield]||c)});for(var f=0;f<e.length;f++){var d=b.create(e[f]);d.commit()}$A.DynamicTree.TreeNode.superclass.expand.call(this)},scope:this})}}}},isLeaf:function(){return this.isLoaded?this.childNodes.length===0:false}});